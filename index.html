<!doctype html>
<html lang="fr">
<head>
    <meta charset="UTF-8"/>

    <!-- Préchargement des ressources critiques prioritaires -->
    <link rel="preload" as="image" href="/img/landing.png" fetchpriority="high">
    <link rel="preload" href="/assets/css/main.css" as="style">
    <link rel="preload" href="/src/main.jsx" as="script">
    <link rel="preload" href="/img/landing.png" as="image" fetchpriority="high">


    <!-- Connexions anticipées -->
    <link rel="preconnect" href="https://assets.lummi.ai">
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
    <link rel="dns-prefetch" href="https://fonts.googleapis.com">

    <!-- Icône de favori optimisée -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg"/>

    <!-- Informations de base -->
    <title>Portfolio - Valentin Gassend</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="description" content="Je m'appelle Valentin Gassend et voici mon portfolio. Je suis un développeur front-end créatif disponible en freelance"/>
    <meta name="author" content="Valentin Gassend">
    <meta name="robots" content="index, follow"/>
    <meta name="theme-color" content="#ffffff">

    <!-- Styles critiques inlinés pour le rendu initial -->
    <style>
        /* Styles minimaux pour le premier rendu */
        body, html { margin: 0; padding: 0; font-family: system-ui, -apple-system, sans-serif; }
        .loading-skeleton { padding: 20px; max-width: 1200px; margin: 0 auto; }
        .skeleton-header { height: 60px; background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%); background-size: 200% 100%; animation: shimmer 1.5s infinite; }
        .skeleton-hero { margin: 40px 0; }
        .skeleton-title { height: 40px; width: 80%; background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%); background-size: 200% 100%; animation: shimmer 1.5s infinite; margin-bottom: 20px; }
        .skeleton-subtitle { height: 20px; width: 60%; background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%); background-size: 200% 100%; animation: shimmer 1.5s infinite; }
        .skeleton-block { height: 200px; margin: 20px 0; background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%); background-size: 200% 100%; animation: shimmer 1.5s infinite; }
        @keyframes shimmer { 0% { background-position: -200% 0; } 100% { background-position: 200% 0; } }
    </style>

    <!-- Chargement des styles principaux -->
    <link rel="stylesheet" href="/assets/css/main.css">

    <!-- Balises Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Portfolio - Valentin Gassend">
    <meta name="twitter:description" content="Je m'appelle Valentin Gassend et voici mon portfolio. Je suis un développeur front-end créatif disponible en freelance">
    <meta name="twitter:image" content="https://www.valentingassend.com/img/landing.png">

    <!-- Balises Open Graph pour Facebook et Discord -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Portfolio - Valentin Gassend">
    <meta property="og:description" content="Je m'appelle Valentin Gassend et voici mon portfolio. Je suis un développeur front-end créatif disponible en freelance">
    <meta property="og:image" content="https://www.valentingassend.com/img/landing.png">
    <meta property="og:url" content="https://valentingassend.com">
    <meta property="og:locale" content="fr_FR">

    <!-- URL canonique -->
    <link rel="canonical" href="https://valentingassend.com">

    <!-- Données structurées Schema.org -->
    <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Person",
            "name": "Valentin Gassend",
            "jobTitle": "Développeur Front-End",
            "description": "Développeur front-end créatif disponible en freelance.",
            "url": "https://valentingassend.com",
            "sameAs": [
                "https://www.linkedin.com/in/valentin-gassend/",
                "https://github.com/ValentinGassend"
            ]
        }
    </script>

    <!-- Metrics de performance -->
    <script>
        // Marqueur de performance - début du chargement
        performance.mark('page-start');
    </script>
</head>
<body>
<div id="root"></div>

<!-- Image pré-rendue pour garantir un LCP -->
<img
        src="/img/landing.png"
        alt="Valentin Gassend - Développeur créatif"
        width="1080"
        height="1080"
        fetchpriority="high"
        loading="eager"
        decoding="async"
        id="pre-lcp-element"
        class="pre-lcp-image"
/>

<!-- Script principal avec attributs optimisés -->
<script type="module" src="/src/main.jsx"></script>

<!-- Script de mesure de performance -->
<script>
    // Mesurer le temps de chargement initial
    window.addEventListener('load', function() {
        performance.mark('page-loaded');
        performance.measure('page-load-time', 'page-start', 'page-loaded');

        // Collecter LCP
        try {
            const lcpEntry = performance.getEntriesByType('largest-contentful-paint')[0];
            if (lcpEntry) {
                console.log('LCP:', lcpEntry.startTime);
                const lcpElement = lcpEntry.element;
                if (lcpElement) {
                    lcpElement.setAttribute('data-lcp', 'true');
                }
            }
        } catch (e) {
            console.warn('Erreur lors de la mesure du LCP:', e);
        }
    });
</script>
<script>
    // Force la reconnaissance du LCP
    document.addEventListener('DOMContentLoaded', () => {
        const lcpImage = document.getElementById('preloaded-lcp');
        if (lcpImage) {
            // Force un reflow
            void lcpImage.offsetHeight;

            // Masquer l'image préchargée une fois que React est chargé
            const observer = new MutationObserver(() => {
                const root = document.getElementById('root');
                if (root && root.childNodes.length > 0) {
                    lcpImage.style.opacity = '0';
                    lcpImage.style.transition = 'opacity 0.5s';
                    setTimeout(() => {
                        lcpImage.style.display = 'none';
                    }, 500);
                    observer.disconnect();
                }
            });

            observer.observe(document.getElementById('root'), {
                childList: true,
                subtree: true
            });

            // Diagnostic LCP
            if ('PerformanceObserver' in window) {
                try {
                    const po = new PerformanceObserver((list) => {
                        for (const entry of list.getEntries()) {
                            if (entry.entryType === 'largest-contentful-paint') {
                                console.log('LCP détecté:', entry.element);
                                console.log('LCP timing:', entry.startTime);

                                if (entry.element === lcpImage) {
                                    console.log('✅ Image préchargée correctement identifiée comme LCP!');
                                }
                            }
                        }
                    });
                    po.observe({type: 'largest-contentful-paint', buffered: true});
                } catch (e) {
                    console.warn('PerformanceObserver non supporté', e);
                }
            }
        }
    });
</script>
</body>
</html>